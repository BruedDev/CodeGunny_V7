<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="vi" class="no-js ie6 lt8"> <![endif]-->
<!--[if IE 7 ]>    <html lang="vi" class="no-js ie7 lt8"> <![endif]-->
<!--[if IE 8 ]>    <html lang="vi" class="no-js ie8 lt8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="vi" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="vi" class="no-js"> <!--<![endif]-->

<head>
    <meta charset="UTF-8" />
    <title>Fix Playing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Form đăng nhập và đăng ký với HTML5 và CSS3" />
    <meta name="keywords" content="html5, css3, form, switch, animation, :target, pseudo-class" />
    <meta name="author" content="Codrops" />
    <link rel="shortcut icon" href="favicon.ico">

    <style>
        #DynamicContent {
            z-index: 2000011;
            background-color: #ffd800;
            min-height: 50px;
            width: 366px;
            display: none;
        }

        #TB_overlayBG,
        #Div1 {
            display: none;
            position: fixed;
            z-index: 2001;
            top: 0px;
            left: 0px;
            height: 100%;
            width: 100%;
            background-color: #000;
            filter: alpha(opacity=75);
            -moz-opacity: 0.75;
            opacity: 0.75;
        }

        #loading {
            text-align: center;
            font-size: 14px;
            color: green;
            padding-top: 19px;
        }

        #ErrorContent {
            z-index: 2000011;
            background-color: #ffd800;
            min-height: 50px;
            width: 366px;
            display: none;
        }

        #content {
            text-align: center;
            font-size: 14px;
            color: green;
            padding-top: 19px;
        }

        #codeContent {
            z-index: 200001;
            padding-top: 10px;
            background-color: #fff;
            min-height: 70px;
            width: 345px;
            display: none;
        }

        #ReLoad {
            height: 23px;
            width: 25px;
            background: url(images/iconRe.gif) no-repeat;
            text-indent: -9999px;
            display: block;
            overflow: hidden;
        }

        .auto-style1 {
            width: 130px;
        }
    </style>

    <script type="text/javascript" src="script/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="script/webtoolkit.md5.js"></script>
    <script type="text/javascript" src="script/jquery.corner.js"></script>
    <script src="script/jquery-ui-1.8.21.custom.js" type="text/javascript"></script>
    <script src="script/jquery.ui.button.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            sectionlive(true);
            $("#password").keypress(function (e) {
                if (e.keyCode == 13) {
                    checklogin();
                }
            });
        });

        function xmlhttpPost(strURL, type) {
            showObj();
            var dataStr = getquerystring();
            if (type == 2) {
                dataStr = getquerydonereg();
            }
            $.ajax({
                type: 'GET',
                url: strURL,
                data: dataStr,
                success: function (data_revert) {
                    if (data_revert == "ok") {
                        location.replace("loading.htm");
                    }
                    else {
                        hideObj();
                        $("#loading").html('<span style="color:red; font-size: 14px;">' + data_revert + '</span>');
                    }
                }
            });
        }

        function getquerystring() {
            var username = $("#username").val();
            var password = MD5($("#password").val());
            qstr = 'username=' + escape(username) + '&password=' + escape(password);
            return qstr;
        }

        function checklogin() {
            if ($("#username").val() == '') {
                showError('Bạn chưa nhập tài khoản');
                return false;
            }
            else if ($("#password").val() == '') {
                showError('Bạn chưa nhập mật khẩu');
                return false;
            }
            else {
                xmlhttpPost("checkuser.ashx", 1);
                return false;
            }
        }

        function hideObj() {
            $("#TB_overlayBG").delay(2000).fadeOut('slow');
            $("#DynamicContent").delay(2000).fadeOut('slow');
        }

        function showObj() {
            $('#DynamicContent').corner("keep");
            $("#TB_overlayBG").fadeIn();
            $("#DynamicContent").fadeIn();
            $("#loading").html("Đang xử lý, vui lòng chờ!<br/><br/><img alt=\"\"  src=\"images/loading.gif\" />");
            var top = Math.max($(window).height() / 2 - $("#DynamicContent")[0].offsetHeight / 2, 0);
            var left = Math.max($(window).width() / 2 - $("#DynamicContent")[0].offsetWidth / 2, 0);
            $("#DynamicContent").css('top', top + "px");
            $("#DynamicContent").css('left', left + "px");
            $("#DynamicContent").css('position', 'fixed');
        }

        function showError(content) {
            $('#ErrorContent').corner("keep");
            $("#TB_overlayBG").fadeIn().delay(2000).fadeOut('slow');
            $("#ErrorContent").fadeIn().delay(2000).fadeOut('slow');
            $("#content").html('<span style="color:red; font-size: 14px;">' + content + '</span>');
            var top = Math.max($(window).height() / 2 - $("#ErrorContent")[0].offsetHeight / 2, 0);
            var left = Math.max($(window).width() / 2 - $("#ErrorContent")[0].offsetWidth / 2, 0);
            $("#ErrorContent").css('top', top + "px");
            $("#ErrorContent").css('left', left + "px");
            $("#ErrorContent").css('position', 'fixed');
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="codrops-top">
            <div class="clr"></div>
        </div>
    </div>

    <section>
        <div id="container_demo">
            <a class="hiddenanchor" id="toregister"></a>
            <a class="hiddenanchor" id="tologin"></a>

            <div id="wrapper">
                <div id="login" class="animate form">
                    <form autocomplete="on">
                        <h1>
                            Chào mừng đăng nhập
                        </h1>
                        <p>
                            <label for="username" class="uname" data-icon="u">
                                <strong>Tài khoản:</strong>
                            </label>
                            <input id="username" name="username" required="required" type="text"
                                placeholder="Tên đăng nhập" />
                        </p>
                        <p>
                            <label for="password" class="youpasswd" data-icon="p">
                                <strong>Mật khẩu:</strong>
                            </label>
                            <input id="password" name="password" required="required" type="password"
                                placeholder="Mật khẩu" />
                        </p>
                        <p class="login button">
                            <input type="submit" value="Đăng nhập" onClick="return checklogin();" />
                        </p>
                    </form>
                </div>

                <script>
                    function xmlhttpPostReg() {
                        $.ajax({
                            type: 'GET',
                            url: 'auth/register.ashx',
                            data: getregquerystring(),
                            success: function (data_revert) {
                                if (data_revert == "ok") {
                                    xmlhttpPost("checkuser.ashx", 2);
                                    hideCode();
                                }
                                if (data_revert == "exit") {
                                    showError('Tài khoản đã được sử dụng!');
                                    hideCode();
                                }
                                else {
                                    showError(data_revert);
                                }
                            }
                        });
                    }

                    function getquerydonereg() {
                        var username = $("#usernamesignup").val();
                        var password = MD5($("#passwordsignup").val());
                        qstr = 'username=' + escape(username) + '&password=' + escape(password);
                        return qstr;
                    }

                    function getregquerystring() {
                        var username = $("#usernamesignup").val();
                        var password = $("#passwordsignup").val();
                        var repassword = $("#passwordsignup_confirm").val();
                        var email = $("#emailsignup").val();
                        var code = $("#code").val();
                        qstr = 'username=' + escape(username) + '&password=' + escape(password)
                            + '&repassword=' + escape(repassword) + '&email=' + escape(email)
                            + '&code=' + escape(code);
                        return qstr;
                    }

                    function href() {
                        var randomnum = Math.random();
                        var getimagecode = document.getElementById("ImageCode");
                        getimagecode.src = "auth/validatecode.ashx? " + randomnum;
                        $("#code").val("");
                    }

                    function IsEmail(email) {
                        var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                        if (!regex.test(email)) {
                            return false;
                        } else {
                            return true;
                        }
                    }

                    function checkCode() {
                        if ($("#code").val() == '') {
                            showError('Vui lòng nhập mã xác thực!');
                            return false;
                        }
                        else {
                            xmlhttpPostReg();
                        }
                        return false;
                    }

                    function checkForm() {
                        var err = 0;
                        if ($("#usernamesignup").val() == '') {
                            showError('Vui lòng nhập tên tài khoản!');
                            err++;
                        }
                        else if ($("#passwordsignup").val() == '') {
                            showError('Vui lòng nhập mật khẩu!');
                            err++;
                        }
                        else if ($("#passwordsignup_confirm").val() == '') {
                            showError('Vui lòng nhập xác nhận mật khẩu!');
                            err++;
                        }
                        else if ($("#emailsignup").val() == '') {
                            showError('Vui lòng nhập email!');
                            err++;
                        }
                        else if ($("#passwordsignup_confirm").val() != $("#passwordsignup").val()) {
                            showError('Xác nhận mật khẩu không khớp!');
                            err++;
                        }
                        else if (!IsEmail($("#emailsignup").val())) {
                            showError('Email không hợp lệ!');
                            err++;
                        }
                        if (err == 0) {
                            $('#codeContent').corner("keep");
                            $("#checkCode").button();
                            $("#Div1").fadeIn();
                            $("#codeContent").fadeIn();
                            var top = Math.max($(window).height() / 2 - $("#codeContent")[0].offsetHeight / 2, 0);
                            var left = Math.max($(window).width() / 2 - $("#codeContent")[0].offsetWidth / 2, 0);
                            $("#codeContent").css('top', top + "px");
                            $("#codeContent").css('left', left + "px");
                            $("#codeContent").css('position', 'fixed');
                        }
                        return false;
                    }

                    function hideCode() {
                        href();
                        $("#Div1").fadeOut('slow');
                        $("#codeContent").fadeOut('slow');
                    }
                </script>

                <div id="register" class="animate form">
                    <form autocomplete="on">
                        <h1>Đăng ký</h1>
                        <p>
                            <label for="usernamesignup" class="uname" data-icon="u">
                                <strong>Tài khoản</strong>
                            </label>
                            <input id="usernamesignup" name="usernamesignup" required="required" type="text"
                                placeholder="Nhập tên đăng nhập, đảm bảo chưa sử dụng" />
                        </p>
                        <p>
                            <label for="emailsignup" class="youmail" data-icon="e">
                                <strong>Email</strong>
                            </label>
                            <input id="emailsignup" name="emailsignup" required="required" type="email"
                                placeholder="Nhập email, định dạng phải chính xác" />
                        </p>
                        <p>
                            <label for="passwordsignup" class="youpasswd" data-icon="p">
                                <strong>Mật khẩu</strong>
                            </label>
                            <input id="passwordsignup" name="passwordsignup" required="required" type="password"
                                placeholder="Mật khẩu" />
                        </p>
                        <p>
                            <label for="passwordsignup_confirm" class="youpasswd" data-icon="p">
                                <strong>Xác nhận</strong>
                            </label>
                            <input id="passwordsignup_confirm" name="passwordsignup_confirm" required="required"
                                type="password" placeholder="Nhập lại để xác nhận mật khẩu" />
                        </p>
                        <p class="signin button">
                            <input type="submit" value="Đăng ký" onclick="return checkForm();" />
                            <span>&nbsp;&nbsp;&nbsp;&nbsp;Sau khi đăng ký sẽ vào game! Chơi game vừa phải có lợi cho trí
                                não, nghiện game có hại cho sức khỏe. Sắp xếp thời gian hợp lý, tận hưởng cuộc sống khỏe
                                mạnh.</span>
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <div id="DynamicContent">
        <div id="loading">
            Đang xử lý, vui lòng đợi trong giây lát!
            <img alt="" src="images/loading.gif" />
        </div>
    </div>

    <div id="ErrorContent">
        <div id="content"></div>
    </div>

    <div id="codeContent">
        <table>
            <tr>
                <td class="auto-style1">
                    <img id="ImageCode" src="auth/validatecode.ashx" height="32" width="127" alt="" />
                </td>
                <td>
                    <input type="text" name="code" placeholder="Vui lòng nhập mã xác thực" id="code" />
                </td>
                <td>
                    <a id="ReLoad" title="" href="javascript:href()">Làm mới</a>
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <input id="checkCode" type="submit" value="Xác nhận" onclick="return checkCode();" />
                </td>
            </tr>
        </table>
    </div>

    <div id="TB_overlayBG"></div>
    <div id="Div1"></div>
</body>

</html>