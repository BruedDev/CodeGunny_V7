<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 lt8"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7 lt8"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8 lt8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="UTF-8" />
        <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  -->
        <title>明轩弹弹堂</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Login and Registration Form with HTML5 and CSS3" />
        <meta name="keywords" content="html5, css3, form, switch, animation, :target, pseudo-class" />
        <meta name="author" content="Codrops" />
        <link rel="shortcut icon" href="favicon.ico">
<!--        <link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link rel="stylesheet" type="text/css" href="css/style3.css" />
		<link rel="stylesheet" type="text/css" href="css/animate-custom.css" />
        <link href="css/base/jquery.ui.all.css" rel="stylesheet" type="text/css" /> -->
        <style>

#DynamicContent
{
    z-index: 2000011;
	background-color:#ffd800;
	min-height:50px;
	width:366px;
	display:none;
}
#TB_overlayBG,#Div1
{
	display:none;
    position: fixed;
	z-index:2001;
	top: 0px;
	left: 0px;
	height:100%;
	width:100%;
	background-color:#000;
	filter:alpha(opacity=75);
	-moz-opacity: 0.75;
	opacity: 0.75;

}

#loading {
				text-align: center;
				font-size: 14px;
				color:green;
				padding-top: 19px;
}

#ErrorContent
{
    z-index: 2000011;
	background-color:#ffd800;
	min-height:50px;
	width:366px;
	display:none;
}

#content {
				text-align: center;
				font-size: 14px;
				color:green;
				padding-top: 19px;
}
#codeContent
{
    z-index: 200001;
    padding-top: 10px;
	background-color:#fff;
	min-height:70px;
	width:345px;
	display:none;
}
#ReLoad{height:23px;width:25px;background:url(images/iconRe.gif) no-repeat;text-indent:-9999px;display:block;overflow:hidden;}

            .auto-style1
            {
                width: 130px;
            }

        </style>
         <script type="text/javascript" src="script/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="script/webtoolkit.md5.js"></script>
        <script type="text/javascript" src="script/jquery.corner.js"></script>
        <script src="script/jquery-ui-1.8.21.custom.js" type="text/javascript"></script>
        <script src="script/jquery.ui.button.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                sectionlive(true);
                $("#password").keypress(function (e) {
                    if (e.keyCode == 13) {
                        checklogin();
                    }
                });
            });

            function xmlhttpPost(strURL, type) {
                showObj();
                var dataStr = getquerystring();
                if (type == 2)
                {
                    dataStr = getquerydonereg();
                }
                $.ajax({
                    type: 'GET',
                    url: strURL,
                    data: dataStr,
                    success: function (data_revert) {

                        if (data_revert == "ok") {
                            location.replace("loading.htm");
                            //showObj();
                        }
                        else{
                            hideObj();
                            $("#loading").html('<span style="color:red; font-size: 14px;">' + data_revert + '</span>');
                        }

                    }
                });

            }
            function getquerystring() {
                var username = $("#username").val();
                var password = MD5($("#password").val());
                qstr = 'username=' + escape(username) + '&password=' + escape(password);
                return qstr;
            }
            function checklogin() {
                if ($("#username").val() == '') {
                    //return true;
                    showError('您没有输入帐号');
                    return false;
                }
                else if ($("#password").val() == '') {
                    //return true;
                    showError('您没有输入密码');
                    return false;
                }
                else {
                    xmlhttpPost("checkuser.ashx", 1);
                    return false;
                }

            }

            function hideObj() {

                $("#TB_overlayBG").delay(2000).fadeOut('slow');
                $("#DynamicContent").delay(2000).fadeOut('slow');//.css({ display: "none" });
            }
            function showObj() {
                $('#DynamicContent').corner("keep");
                $("#TB_overlayBG").fadeIn();//.css({ display: "block" });
                $("#DynamicContent").fadeIn();
                $("#loading").html("正在处理，请稍候!<br/><br/><img alt=\"\"  src=\"images/loading.gif\" />");
                var top = Math.max($(window).height() / 2 - $("#DynamicContent")[0].offsetHeight / 2, 0);
                var left = Math.max($(window).width() / 2 - $("#DynamicContent")[0].offsetWidth / 2, 0);
                $("#DynamicContent").css('top', top + "px");
                $("#DynamicContent").css('left', left + "px");
                $("#DynamicContent").css('position', 'fixed');
            }
            //$("#DynamicContent").live("click", function () {
                //$(this).hide();
                //$("#TB_overlayBG").hide();
            //});
            function showError(content) {
                $('#ErrorContent').corner("keep");
                $("#TB_overlayBG").fadeIn().delay(2000).fadeOut('slow');
                $("#ErrorContent").fadeIn().delay(2000).fadeOut('slow');
                $("#content").html('<span style="color:red; font-size: 14px;">' + content + '</span>');
                var top = Math.max($(window).height() / 2 - $("#ErrorContent")[0].offsetHeight / 2, 0);
                var left = Math.max($(window).width() / 2 - $("#ErrorContent")[0].offsetWidth / 2, 0);
                $("#ErrorContent").css('top', top + "px");
                $("#ErrorContent").css('left', left + "px");
                $("#ErrorContent").css('position', 'fixed');
            }
             </script>
    </head>
	<header>
	</header>
    <body bgcolor="#CBEA4B">
        <div class="container">

            <!-- Codrops top bar -->
            <div class="codrops-top">
                <div class="clr"></div>
            </div>
			</div>
            <!--/ Codrops top bar -->


<table width="1900" height="887" border="0" cellpadding="0" cellspacing="0" background="images/bg.jpg">
  <tr>
    <td><section>
              <div id="container_demo" >
                <!-- hidden anchor to stop jump-->
                <a class="hiddenanchor" id="toregister"></a>
                <a class="hiddenanchor" id="tologin"></a>
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td width="6%">&nbsp;</td>
      <td width="94%">
  <table width="323" height="859" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td>  <table align="center" width="250" height="859" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td><div id="wrapper">
            <div id="login" class="animate form">
              <form  autocomplete="on">
                <h1><span style="font-family:'微软雅黑'"><br>
                  <br>
                  <br>
                  欢迎登录</span></h1>
                                  <p>
                                    <label for="username" class="uname" data-icon="u" ><strong>账&nbsp;&nbsp;&nbsp;户：</strong></label>
                                    <input style="background-color:#f8f2ea" id="username" name="username" required="required" type="text" placeholder="用户名"/>
                            </p>
                                  <p>
                                    <label for="password" class="youpasswd" data-icon="p"><strong>密&nbsp;&nbsp;&nbsp;码：</strong></label>
                                    <input style="background-color:#f8f2ea" id="password" name="password" required="required" type="password" placeholder="密码" />
                            </p>

                                <p class="login button">
                                  <input type="submit" value="登录" onClick="return checklogin();"/>
                                  <span style="font-family:微软雅黑; font-size:12px; line-height:18px;">&nbsp;&nbsp;&nbsp;&nbsp;本游戏程序来自外国网站，如有侵犯您任何权利请通知我们会在第一时间删除，只为游戏技术爱好和交流，支持官方第七大道正版！</span> </p>
                                </form>
                        </div>
                          <script>
                            function xmlhttpPostReg() {
                                //showObj();
                                $.ajax({
                                    type: 'GET',
                                    url: 'auth/register.ashx',
                                    data: getregquerystring(),
                                    success: function (data_revert) {
                                        if (data_revert == "ok") {
                                            xmlhttpPost("checkuser.ashx", 2);
                                            hideCode();
                                        }
                                        if (data_revert == "exit") {
                                            showError('帐号已被使用！');
                                            hideCode();
                                        }
                                        else {
                                            showError(data_revert);
                                        }
                                    }
                                });
                            }

                            function getquerydonereg() {
                                var username = $("#usernamesignup").val();
                                var password = MD5($("#passwordsignup").val());
                                qstr = 'username=' + escape(username) + '&password=' + escape(password);
                                return qstr;
                            }
                            function getregquerystring() {
                                var username = $("#usernamesignup").val();
                                var password = $("#passwordsignup").val();
                                var repassword = $("#passwordsignup_confirm").val();
                                var email = $("#emailsignup").val();
                                var code = $("#code").val();
                                qstr = 'username=' + escape(username) + '&password=' + escape(password)
                                + '&repassword=' + escape(repassword) + '&email=' + escape(email)
                                + '&code=' + escape(code);
                                return qstr;
                            }
                            function href() {
                                var randomnum = Math.random();
                                var getimagecode = document.getElementById("ImageCode");
                                getimagecode.src = "auth/validatecode.ashx? " + randomnum;
                                $("#code").val("");
                            }
                            function IsEmail(email) {
                                var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                                if (!regex.test(email)) {
                                    return false;
                                } else {
                                    return true;
                                }
                            }
                            function checkCode() {
                                if ($("#code").val() == '') {
                                    showError('请输入安全验证码!');
                                    return false;
                                }
                                else{
                                    xmlhttpPostReg();
                                }
                                return false;
                            }
                            function checkForm() {
                                var err = 0;
                                if ($("#usernamesignup").val() == '') {
                                    showError('请输入您的帐户名!');
                                    err++;
                                }
                                else if ($("#passwordsignup").val() == '') {
                                    showError('请输入密码!');
                                    err++;
                                }
                                else if ($("#passwordsignup_confirm").val() == '') {
                                    showError('请输入确认密码!');
                                    err++;
                                }
                                else if ($("#emailsignup").val() == '') {
                                    showError('请输入电邮!');
                                    err++;
                                }
                                else if ($("#passwordsignup_confirm").val() != $("#passwordsignup").val()) {
                                    showError('确认密码不一致!');
                                    err++;
                                }
                                else if (!IsEmail($("#emailsignup").val())) {
                                    showError('电子邮箱无效!');
                                    err++;
                                }
                                //else if ($("#code").val() == '') {
                                //    showError('请输入安全验证码!');
                                //    err++;
                                //}
                                if (err == 0) {
                                    $('#codeContent').corner("keep");
                                    $("#checkCode").button();
                                    $("#Div1").fadeIn();
                                    $("#codeContent").fadeIn();
                                    var top = Math.max($(window).height() / 2 - $("#codeContent")[0].offsetHeight / 2, 0);
                                    var left = Math.max($(window).width() / 2 - $("#codeContent")[0].offsetWidth / 2, 0);
                                    $("#codeContent").css('top', top + "px");
                                    $("#codeContent").css('left', left + "px");
                                    $("#codeContent").css('position', 'fixed');
                                    //xmlhttpPostReg();
                                }
                                return false;
                            }
                            function hideCode() {
                                href();
                                $("#Div1").fadeOut('slow');
                                $("#codeContent").fadeOut('slow');//.css({ display: "none" });
                            }

                        </script>
                          <div id="register" class="animate form">
              <form  autocomplete="on">

                                  <p style="font-family:'微软雅黑'">
                                    <label for="usernamesignup" class="uname" data-icon="u"><strong><br>
                                    <br>
                                    帐&nbsp;&nbsp;&nbsp;&nbsp;户</strong></label>
                                    <input style="background-color:#f8f2ea" id="usernamesignup" name="usernamesignup" required="required" type="text" placeholder="输入用户名，确保未使用" />
                            </p>
                                  <p style="font-family:'微软雅黑'">
                                    <label for="emailsignup" class="youmail" data-icon="e" ><strong> 邮&nbsp;&nbsp;&nbsp;&nbsp;件</strong></label>
                                    <input style="background-color:#f8f2ea" id="emailsignup" name="emailsignup" required="required" type="email" placeholder="输入邮箱，格式必须正确"/>
                            </p>
                                  <p style="font-family:'微软雅黑'">
                                    <label for="passwordsignup" class="youpasswd" data-icon="p"><strong>密&nbsp;&nbsp;&nbsp;&nbsp;码 </strong></label>
                                    <input style="background-color:#f8f2ea" id="passwordsignup" name="passwordsignup" required="required" type="password" placeholder="密码"/>
                            </p>
                                  <p style="font-family:'微软雅黑'">
                                    <label for="passwordsignup_confirm" class="youpasswd" data-icon="p"><strong>密&nbsp;&nbsp;&nbsp;&nbsp;码 </strong></label>
                                    <input style="background-color:#f8f2ea" id="passwordsignup_confirm" name="passwordsignup_confirm" required="required" type="password" placeholder="二次输入确认密码"/>
                            </p>
                                  <p class="signin button" style="font-family:'微软雅黑'">
                                    <input type="submit" value="注册"  onclick="return checkForm();"/>
                                    <span class="signin button" style="font-family:'微软雅黑'"> </span><span class="signin button" style="font-family:'微软雅黑'"> </span><span class="signin button" style="font-family:'微软雅黑'"> </span><span class="signin button" style="font-family:'微软雅黑'"> </span><span class="signin button" style="font-family:'微软雅黑'"> </span><span style="font-family:微软雅黑; font-size:12px; line-height:18px;">&nbsp;&nbsp;&nbsp;&nbsp;注册后将进入游戏！适度游戏益脑,沉迷游戏伤身。 合理安排时间,享受健康生活。</span> </p>
                                </form>
                        </div>

                    </div></td>
    </tr>
  </table></td>
    </tr>
  </table>


	</td>
    </tr>
  </table>


              </div>
      </section>

      <div id="DynamicContent">
        <div id="loading" >
          正在处理中，请稍等片刻！
          <img alt=""  src="images/loading.gif" />
        </div>
	  </div>

    <div id="ErrorContent">
      <div id="content" >
        </div>
	  </div>

    <div id="codeContent">
      <table style="width:100%;">
        <tr>
          <td class="auto-style1">
            <img id="ImageCode" src="auth/validatecode.ashx" height="32" width ="127" alt="" />
            </td>
              <td style="text-align: center" >
                <input type="text"  style="font-size: 14px;width: 120px" name="code" placeholder="请输入验证码" id="code"/>
            </td>
              <td>
                <a id="ReLoad" title="" href="javascript:href()" style="font-size: 12px; color: blue">刷新</a>
            </td>
          </tr>
        <tr>
          <td colspan="3" style="text-align: center;">
            <input id="checkCode"  style="font-size: 14px;" type="submit" value="确认"  onclick="return checkCode();"/>
            </td>
          </tr>
        </table>
	  </div>
  <div id="TB_overlayBG">
  </div>
  <div id="Div1">
</div></td></tr>
</table>

    </body>
</html>